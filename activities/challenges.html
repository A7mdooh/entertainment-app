<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>تحدي الفرق</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background-color: #f0f0f0;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    .header {
      background-color: #00796B;
      color: white;
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 2rem;
    }
    .section { margin: 20px 0; }
    .split-screen {
      display: flex;
      justify-content: space-between;
      align-items: stretch;
      gap: 20px;
    }
    .team-box {
      flex: 1;
      background-color: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .team-name {
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .score {
      font-size: 2rem;
      color: #00796B;
    }
    .controls button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 1.2rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .add { background-color: #4CAF50; color: white; }
    .sub { background-color: #f44336; color: white; }
    .end { background-color: #2196F3; color: white; }
    #timer {
      font-size: 3rem;
      margin: 20px 0;
      color: #333;
    }
    #turnDisplay {
      font-size: 1.5rem;
      margin-bottom: 10px;
      color: #555;
    }
    .fireworks {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: url('../assets/media/sounds/firework.gif') center center no-repeat;
      background-size: cover;
      z-index: 9999;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>🏆 تحدي الفرق</h1>
    <p>إدارة التحدي بين فريقين بإشراف المعلم</p>
  </div>

  <div class="section" id="turnDisplay">الدور على: <span id="currentTeam">فريق 1</span></div>
  <div id="timer">00:30</div>

  <div class="split-screen">
    <div class="team-box">
      <div class="team-name">🔵 فريق 1</div>
      <div class="score" id="score1">0</div>
      <div class="controls">
        <button class="add" onclick="adjustScore(1, 1)">➕ نقطة</button>
        <button class="sub" onclick="adjustScore(1, -1)">➖ نقطة</button>
      </div>
    </div>
    <div class="team-box">
      <div class="team-name">🔴 فريق 2</div>
      <div class="score" id="score2">0</div>
      <div class="controls">
        <button class="add" onclick="adjustScore(2, 1)">➕ نقطة</button>
        <button class="sub" onclick="adjustScore(2, -1)">➖ نقطة</button>
      </div>
    </div>
  </div>

  <div class="section">
    <button class="end" onclick="endChallenge()">🎉 إنهاء التحدي</button>
  </div>

  <div class="fireworks" id="fireworks"></div>

  <script>
    let score1 = 0, score2 = 0;
    let currentTeam = 1;
    let duration = 30; // الثواني
    let timer;

    function updateTimerDisplay() {
      const minutes = Math.floor(duration / 60);
      const seconds = duration % 60;
      document.getElementById("timer").textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
    }

    function startTimer() {
      updateTimerDisplay();
      timer = setInterval(() => {
        if (duration <= 0) {
          clearInterval(timer);
          nextTurn();
        } else {
          duration--;
          updateTimerDisplay();
        }
      }, 1000);
    }

    function adjustScore(team, delta) {
      if (team === 1) {
        score1 += delta;
        document.getElementById("score1").textContent = score1;
      } else {
        score2 += delta;
        document.getElementById("score2").textContent = score2;
      }
    }

    function nextTurn() {
      currentTeam = currentTeam === 1 ? 2 : 1;
      document.getElementById("currentTeam").textContent = `فريق ${currentTeam}`;
      duration = 30;
      startTimer();
    }

    function endChallenge() {
      clearInterval(timer);
      const winner = score1 > score2 ? '🔵 فريق 1' : (score2 > score1 ? '🔴 فريق 2' : '🏁 تعادل');
      document.getElementById("turnDisplay").innerHTML = `<strong>الفائز: ${winner}</strong>`;
      document.getElementById("fireworks").style.display = 'block';
      setTimeout(() => {
        document.getElementById("fireworks").style.display = 'none';
      }, 4000);
    }

    window.onload = startTimer;
  </script>
</body>
</html>
